<!DOCTYPE html><html><head><title>Smart Pointers</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><link rel="stylesheet" type="text/css" href="../style/slidedeckalpha.css"><link rel="stylesheet" href="../code.css"><script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script><script type="text/javascript">
hljs.initHighlightingOnLoad();


</script></head><body><section><div class="bigtitle"><div class="title"><strong>Smart Pointers</strong></div><div class="presenter">Brian Kidney</div></div><footer><a href="http://briankidney.ca/presentations/acu-smart-pointers/slides/">http://briankidney.ca/presentations/acu-smart-pointers/slides/</a></footer></section><p><section>
	<h1 class="slidetitle">A wise man said...</h1>
	<blockquote>
<p>&ldquo;In C++ it&rsquo;s harder to shoot yourself in the foot, but when you do, you blow off your whole leg.&rdquo;    â€” Bjarne Stroustrup.</p>
</blockquote>

</section>
</p>

<p><section>
	<h1 class="slidetitle">Smart Pointers</h1>
	<ul>
<li>Until recently we had &ldquo;new&rdquo; and &ldquo;delete&rdquo;</li>
<li>We also had

<ul>
<li>Owership decisions (who calls delete?)</li>
<li>Memory leaks</li>
</ul></li>
</ul>

</section>
</p>

<p><section>
	<h1 class="slidetitle">Smart Pointers</h1>
	<ul>
<li>Smart pointers replace &ldquo;new&rdquo; and &ldquo;delete&rdquo;

<ul>
<li>In most cases</li>
</ul></li>
<li>Remove memory management burden</li>
</ul>

</section>
</p>

<p><section>
	<h1 class="slidetitle">Types of Smart Pointers</h1>
	<ul>
<li>unique_ptr

<ul>
<li>When in doubt its the default</li>
<li>Can be moved but not copied</li>
</ul></li>
<li>shared_ptr

<ul>
<li>For pointers that will be shared</li>
<li>Only use is sharing need is known</li>
<li>unique_ptr can be converted to shared_ptr</li>
</ul></li>
</ul>

</section>
</p>

<p><section>
	<h1 class="slidetitle">Types of Smart Pointers</h1>
	<ul>
<li>weak_ptr

<ul>
<li>Copy from a shared_ptr</li>
<li>Made empty by distruction of shared_ptr</li>
<li>Can be used to break a circular reference</li>
</ul></li>
<li>auto_ptr

<ul>
<li>Attempt from previous standard without move semantics</li>
<li>Majority of uses can be converted to unique_ptr</li>
</ul></li>
</ul>

</section>
</p>

<p><section>
	<h1 class="slidetitle">Examples - unique_ptr</h1>
	<pre class="code"><code class="cpp">

  // Creating a Unique Pointer
  std::unique_ptr<int> the_answer = std::make_unique<int>(42);
  std::cout << "Creation..." << std::endl;
  std::cout << " the_answer.get() = " << the_answer.get() << std::endl;
  std::cout << "*the_answer = " << *the_answer << std::endl;
  
  // Copying a Unique Pointer is not allowed
  // std::unique_ptr<int> last_game_scores = scores;
  
  // Moving a Unique Pointer
  std::unique_ptr<int> forty_two  = std::move(the_answer);
  std::cout << "After move..." << std::endl;
  std::cout << " the_answer.get() = " << the_answer.get() << std::endl;
  std::cout << "*the_answer = " << std::endl; //<< *the_answer << std::endl;
  std::cout << " forty_two.get() = " << forty_two.get() << std::endl;
  std::cout << "*forty_two = " << *forty_two << std::endl;

  // Releasing the pointer
  forty_two.reset();
  std::cout << "After reset..." << std::endl;
  std::cout << " forty_two.get() = " << forty_two.get() << std::endl;
  std::cout << "*forty_two = " << std::endl; // << *forty_two << std::endl;

</code></pre>

</section>
</p>

<p><section>
	<h1 class="slidetitle">Examples - shared_ptr and weak_ptr</h1>
	
</section>
</p>

<p><section>
	<h1 class="slidetitle">What about Raw Pointers?</h1>
	<ul>
<li>Low level data structures

<ul>
<li>For performance, maybe!</li>
</ul></li>
<li>Non-owning pointers and reference

<ul>
<li>Pass to a function with limited lifecycle</li>
</ul></li>
<li>Observer to an object with a longer life</li>
</ul>

</section>
</p>

<p><section>
	<h1 class="slidetitle">Examples - Raw Pointer</h1>
	
</section>
</p>

<p><section>
	<h1 class="slidetitle">References</h1>
	<ul>
<li><a href="http://herbsutter.com/elements-of-modern-c-style/">http://herbsutter.com/elements-of-modern-c-style/</a></li>
<li><a href="http://herbsutter.com/2013/05/29/gotw-89-solution-smart-pointers/">http://herbsutter.com/2013/05/29/gotw-89-solution-smart-pointers/</a></li>
<li><a href="http://en.wikipedia.org/wiki/Smart_pointer">http://en.wikipedia.org/wiki/Smart_pointer</a></li>
<li>&ldquo;Back to the Basics! Essentials of Modern C++ Style&rdquo; - Herb Sutter

<ul>
<li><a href="https://www.youtube.com/watch?v=xnqTKD8uD64">https://www.youtube.com/watch?v=xnqTKD8uD64</a></li>
<li><a href="https://github.com/CppCon/CppCon2014">https://github.com/CppCon/CppCon2014</a></li>
</ul></li>
</ul>

</section>
</p>
<div id="progress-bar"></div><div id="lastupdated">Last updated: 1 Mar 2015</div><script src="../dzslides.js"></script></body></html>